<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title><%- titlePage %></title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<!-- Navbar -->
		<%- include('components/navbar') %>

		<!-- Main Content -->
		<div class="container mt-4">
			<h1>Products</h1>
			<div class="card mb-4">
				<div class="card-body">
					<h5 class="card-title">Add New Product</h5>
					<form action="/api/products" method="POST">
						<div class="row my-3">
							<div class="col">
								<input
									type="text"
									class="form-control"
									placeholder="Nama Produk"
									aria-label="Nama Produk"
									name="name"
								/>
							</div>
							<div class="col">
								<select
									name="category_id"
									class="form-select"
									aria-label="Pilih Kategori"
								>
									<option value="" selected>Pilih Kategori</option>
									<% categories.forEach(category => { %>
									<option value="<%= category.id %>">
										<%= category.code === "FOOD" ? "Makanan" : "Minuman" %>
									</option>
									<% }) %>
								</select>
							</div>
							<div class="col">
								<input
									type="number"
									class="form-control"
									placeholder="Netto / Berat bersih"
									aria-label="Netto"
									name="weight"
								/>
							</div>
						</div>
						<div class="row my-3">
							<div class="col">
								<input
									type="number"
									class="form-control"
									placeholder="Stok"
									aria-label="Stock"
									name="stock"
								/>
							</div>
							<div class="col">
								<input
									type="number"
									class="form-control"
									placeholder="Harga Satuan"
									aria-label="Harga Satuan"
									name="unit_price"
								/>
							</div>
							<div class="col">
								<input
									type="number"
									class="form-control"
									placeholder="Harga Jual"
									aria-label="Harga Jual"
									name="sell_price"
								/>
							</div>
						</div>
						<div class="my-3">
							<input
								type="text"
								class="form-control"
								placeholder="Description"
								name="description"
							/>
						</div>
						<button type="submit" class="btn btn-primary">Tambah Produk</button>
					</form>
				</div>
			</div>

			<!-- Product List -->
			<h2>Product List</h2>
			<table class="table">
				<thead>
					<tr>
						<th>Product Name</th>
						<th>Weight</th>
						<th>Stock</th>
						<th>Unit Price</th>
						<th>Sell Price</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<% products.forEach(product => { %>
					<tr>
						<td><%= product.name %></td>
						<td><%= product.weight %></td>
						<td><%= product.stock %></td>
						<td><%= product.unit_price %></td>
						<td><%= product.sell_price %></td>
						<td>
							<button
								type="button"
								class="btn btn-warning btn-sm"
								data-id="<%= product.id %>"
								data-action="edit"
							>
								Edit
							</button>
							<button
								class="btn btn-danger btn-sm"
								data-id="<%= product.id %>"
								data-action="delete"
							>
								Delete
							</button>
						</td>
					</tr>
					<% }) %>
				</tbody>
			</table>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script id="products-data" type="application/json">
			<%- JSON.stringify(products) %>
		</script>
	</body>
</html>
